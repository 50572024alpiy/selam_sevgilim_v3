<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz</title>
  <link rel="stylesheet" href="f1.css" />
  <link rel="stylesheet" href="auth-gate.css">
</head>

<body>
  <main class="wrap">
    <header class="head">
      <h1>Mini Quiz</h1>
      <p class="sub">BÃ¼tÃ¼n sorular slaytlardan hayatÄ±m :) </p>

      <div class="hud">
        <div class="pill">
          Skor:
          <strong><span id="score" aria-live="polite">0</span>/<span id="total">0</span></strong>
        </div>
        <div class="actions">
          <button id="resetBtn" class="btn">SÄ±fÄ±rla</button>
        </div>
      </div>
    </header>

    <section id="quiz" class="quiz" aria-live="polite"></section>

    <footer class="foot">
      <a class="back" href="index.html">â† Ana menÃ¼</a>
    </footer>
  </main>

  <script>

    const QUIZ = [
      {
        q: "Beyaz logolu lastik hangi hamurdur ?",
        choices: [
          { t: "YumuÅŸak", correct: false },
          { t: "Sert", correct: true },
          { t: "Orta", correct: false },
          { t: "GeÃ§iÅŸ", correct: false },
        ],
        exp: "ğŸŒ»"
      },
      {
        q: "Start anÄ±nda kaÃ§ kÄ±rmÄ±zÄ± Ä±ÅŸÄ±k sÃ¶ner ?",
        choices: [
          { t: "5", correct: true },
          { t: "4", correct: false },
          { t: "3", correct: false },
          { t: "6", correct: false },
        ],
        exp: "ğŸŒ¸"
      },
      {
        q: "Hangi takÄ±m 2025 Gridinde yer almamaktadÄ±r ?",
        choices: [
          { t: "Racing Bulls", correct: false },
          { t: "Cadillac", correct: true },
          { t: "Aramco", correct: false },
          { t: "Haas", correct: false },
        ],
        exp: "ğŸŒº"
      },
      {
        q: "Hangisi 2025 Gridinde McLaren pilotudur?",
        choices: [
          { t: "Pierre Gasly", correct: false },
          { t: "Lando Norris", correct: true },
          { t: "Lance Stroll", correct: false },
          { t: "Carlos Sainz", correct: false },
        ],
        exp: "ğŸŒ·"
      },
      {
        q: "Ferrari takÄ±mÄ±nÄ±n pilot ikilisi hangisidir?",
        choices: [
          { t: "Lewis Hamilton - Charles Leclerc", correct: true },
          { t: "Lando Norris - Oscar Piastri", correct: false },
          { t: "Max Verstappen - Yuki Tsunoda", correct: false },
          { t: "Geogre Russell - Kimi Antonelli", correct: false },
        ],
        exp: "ğŸŒ¹"
      },
      {
        q: "Alpy hangi pilottan daha Ã§ok nefret eder",
        choices: [
          { t: "Nico Hulkenberg", correct: false },
          { t: "Lando Norris", correct: false },
          { t: "Max Verstappen", correct: true },
          { t: "Alexander Albon", correct: false },
        ],
        exp: "ğŸŒ¸"
      },
      {
        q: "Mercedes takÄ±mÄ±nÄ±n pilot ikilisi hangisidir?",
        choices: [
          { t: "Lewis Hamilton - Charles Leclerc", correct: false },
          { t: "Lando Norris - Oscar Piastri", correct: false },
          { t: "Max Verstappen - Yuki Tsunoda", correct: false },
          { t: "Geogre Russell - Kimi Antonelli", correct: true },
        ],
        exp: "ğŸŒº"
      },
      {
        q: "Lewis Hamilton'Ä±n araÃ§ numarasÄ± nedir",
        choices: [
          { t: "4", correct: false },
          { t: "16", correct: false },
          { t: "22", correct: false },
          { t: "44", correct: true },
        ],
        exp: "ğŸŒ¼"
      },
      {
        q: "Grand Prix'de tur sayÄ±sÄ±nÄ±n farklÄ± olmasÄ±nÄ±n temel sebebi nedir",
        choices: [
          { t: "Seyirci sayÄ±sÄ±ndan", correct: false },
          { t: "Hava SÄ±caklÄ±ÄŸÄ±ndan", correct: false },
          { t: "TakÄ±mlarÄ±n anlaÅŸarak istediÄŸi toplam tur sayÄ±sÄ±", correct: false },
          { t: "Hedef mesafesinin aynÄ± mesafe olmasÄ± iÃ§in", correct: true },
        ],
        exp: "ğŸŒ»"
      },
      {
        q: "TÃ¼m Formula 1 pistleri kaÃ§ sektÃ¶re ayrÄ±lÄ±r",
        choices: [
          { t: "2", correct: false },
          { t: "4", correct: false },
          { t: "5", correct: false },
          { t: "3", correct: true },
        ],
        exp: "ğŸŒ·"
      },
      {
        q: "Sprint yarÄ±ÅŸÄ±nda puan alan pilot sayÄ±sÄ± ve birinciye verilen puan kombinasyonu hangisidir",
        choices: [
          { t: "Ä°lk 10 pilot, birinciye 25 puan", correct: false },
          { t: "Ä°lk 5 pilot, birinciye 10 puan", correct: false },
          { t: "Ä°lk 8 pilot, birinciye 8 puan", correct: true },
          { t: "Ä°lk 3 pilot, birinciye 15 puan", correct: false },
        ],
        exp: "ğŸŒ¹"
      },
      {
        q: "Ana yarÄ±ÅŸta birinci olan pilota kaÃ§ puan verilir",
        choices: [
          { t: "20", correct: false },
          { t: "18", correct: false },
          { t: "15", correct: false },
          { t: "25", correct: true },
        ],
        exp: "ğŸŒ¸"
      },
      {
        q: "YarÄ±ÅŸ haftasonu formatÄ±nda ana yarÄ±ÅŸ hangi gÃ¼n yapÄ±lÄ±r",
        choices: [
          { t: "PerÅŸembe", correct: false },
          { t: "Cuma", correct: false },
          { t: "Cumartesi", correct: false },
          { t: "Pazar", correct: true },
        ],
        exp: "ğŸŒº"
      },
      {
        q: "Lewis Hamiltonun Mercedes kariyerindeki yarÄ±ÅŸ mÃ¼hendisi 'Bono' kimdir ?",
        choices: [
          { t: "Gianpiero Lambiase", correct: false },
          { t: "Pete Bonnington", correct: true },
          { t: "Tom Stallard", correct: false },
          { t: "Mark Temple", correct: false },
        ],
        exp: "ğŸŒ¼"
      },
      {
        q: "Hangi ikili McLaren CEO & takÄ±m patronu ikilisidir ?",
        choices: [
          { t: "Christian Horner - Laurent Mekies", correct: false },
          { t: "Toto Wolff - James Vowles", correct: false },
          { t: "Zak Brown - Andrea Stella", correct: true },
          { t: "Mattia Binotto - FrÃ©dÃ©ric Vasseur", correct: false },
        ],
        exp: "ğŸŒ»"
      },
      {
        q: "Hangisi kuru zemin (slick) lastiklerden deÄŸildir ?",
        choices: [
          { t: "C1", correct: false },
          { t: "C3", correct: false },
          { t: "C5", correct: false },
          { t: "Intermediates", correct: true },
        ],
        exp: "ğŸŒ·"
      },
      {
        q: "Hangi kuru zemin (slick) ve renk eÅŸleÅŸtirmesi doÄŸrudur ?",
        choices: [
          { t: "YumuÅŸak beyaz, orta kÄ±rmÄ±zÄ±, sert sarÄ±", correct: false },
          { t: "YumuÅŸak kÄ±rmÄ±zÄ±, orta sarÄ±, sert beyaz", correct: true },
          { t: "YumuÅŸak sarÄ±, orta beyaz, sert kÄ±rmÄ±zÄ±", correct: false },
          { t: "YumuÅŸak sarÄ±, orta kÄ±rmÄ±zÄ±, sert beyaz", correct: false },
        ],
        exp: "ğŸŒ¹"
      },
      {
        q: "SarÄ± bayrak ne anlama gelir ?",
        choices: [
          { t: "Pist tamamen temiz, tam gaz devam", correct: false },
          { t: "Lapped (tur yiyen) araca yol ver", correct: false },
          { t: "Pistte tehlike var, yavaÅŸla ve geÃ§iÅŸ yapma", correct: true },
          { t: "YarÄ±ÅŸ veya seans resmen bitti", correct: false },
        ],
        exp: "ğŸŒ¸"
      },
    ];

    const quizEl = document.getElementById("quiz");
    const scoreEl = document.getElementById("score");
    const totalEl = document.getElementById("total");
    const resetBtn = document.getElementById("resetBtn");

    let score = 0;

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function randomized() {
      const clone = QUIZ.map(q => ({
        q: q.q,
        exp: q.exp || "",
        choices: q.choices.map(c => ({ t: c.t, correct: !!c.correct }))
      }));
      shuffle(clone);
      clone.forEach(q => shuffle(q.choices));
      return clone;
    }

    function render(questions) {
      totalEl.textContent = questions.length;
      score = 0;
      scoreEl.textContent = "0";

      // Reverse map to ensure first question is on top (highest DOM order usually last, but with absolute position and z-index we control it)
      // Actually, simply setting z-index is enough.

      quizEl.innerHTML = questions.map((q, i) => `
      <article class="qcard" data-idx="${i}" aria-label="Soru ${i + 1}" style="z-index: ${questions.length - i};">
        <div class="q">${q.q}</div>
        <ul class="opts">
          ${q.choices.map((c, j) => `
            <li>
              <button class="opt"
                data-j="${j}"
                aria-pressed="false"
                data-correct="${c.correct ? '1' : '0'}">
                <span class="opt__text">${c.t}</span>
                <span class="badge" aria-hidden="true"></span>
              </button>
            </li>
          `).join("")}
        </ul>
        <div class="exp" id="exp-${i}" hidden>
          <span class="tag" aria-hidden="true"></span> ${q.exp || ""}
        </div>
        <div class="hint-text" style="text-align:center; font-size: 12px; opacity: 0; transition: opacity 0.3s; margin-top: auto;">Devam etmek iÃ§in dokun</div>
      </article>
    `).join("") + `
      <div class="done-card">
        <h2>Tebrikler AÅŸkÄ±m! ğŸ‰</h2>
        <p>Quiz bitti!</p>
        <p>Skorun: <strong id="finalScore">0</strong></p>
        <button class="btn" onclick="render(randomized())" style="margin-top: 20px;">Tekrar Oyna</button>
      </div>
    `;

      quizEl.querySelectorAll(".qcard").forEach(card => {
        card.addEventListener("click", e => {
          // If already answered, dismiss the card
          if (card.classList.contains("answered")) {
            card.classList.add("slide-out");

            // Check if this was the last card
            const remaining = quizEl.querySelectorAll(".qcard:not(.slide-out)").length;
            // The current one has just been added slide-out, but querySelectorAll might capture it still or not depending on timing?
            // Actually classList.add is synchronous.
            // However, let's verify count.
            // If remaining is 0, show done card.

            if (remaining === 0) {
              setTimeout(() => {
                const doneCard = quizEl.querySelector(".done-card");
                const finalScoreEl = document.getElementById("finalScore");
                if (finalScoreEl) finalScoreEl.textContent = score + " / " + questions.length;
                if (doneCard) doneCard.classList.add("active");
              }, 300);
            }
            return;
          }

          const btn = e.target.closest(".opt");
          if (!btn) return;

          // Logic for answering
          const correct = btn.dataset.correct === "1";
          card.classList.add("answered");
          btn.classList.add("selected");
          btn.setAttribute("aria-pressed", "true");

          // Reveal hint text
          const hint = card.querySelector(".hint-text");
          if (hint) hint.style.opacity = 0.7;

          card.querySelectorAll(".opt").forEach(o => {
            o.disabled = true;
            if (o.dataset.correct === "1") o.classList.add("correct");
          });
          if (!correct) btn.classList.add("wrong");
          else {
            card.classList.add("ok");
            score++;
            scoreEl.textContent = String(score);
          }

          const exp = card.querySelector(".exp");
          if (exp && exp.textContent.trim()) exp.hidden = false;
        });
      });
    }

    resetBtn.addEventListener("click", () => render(randomized()));

    render(randomized());
  </script>
</body>

</html>